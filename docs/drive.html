<!doctype html>
<html class="theme-dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,user-scalable=no">
<meta name="description" content="mec2-drive">
<meta name="date" content="Tue Jun 09 2020 02:00:00 GMT+0200 (MitteleuropÃ¤ische Sommerzeit)">
<meta name="keywords" content="">
<title>mec2-drive</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.18.1/styles/github-gist.min.css">

<link rel="stylesheet" href="./theme/styles.css">
</head>
<body>
<header>
  <a href="./index.html" class="left">mec2</a>
  <a href="./about.html" class="right">About</a>
</header>
<main>

    <div class='navigation'>  
        <ul>
        <li><a href="../wiki/getting_started" data-href="../wiki/getting_started">Getting started</a></li>
        <li><a href="../wiki/basic_modules" data-href="../wiki/basic_modules">Basic modules</a></li>
        <li><a href="../wiki/loads" data-href="../wiki/loads">Loads</a></li>
        <li><a href="../wiki/drive" data-href="../wiki/drive">Drive</a></li>
        <li><a href="../wiki/views" data-href="../wiki/views">Views</a></li>
        <li><a href="../wiki/shapes" data-href="../wiki/shapes">Shapes</a></li>
        </ul>
    </div>

<h2 id="drives">Drives <a class="plnk" href="#drives">#</a></h2>
<p>The <code>type</code> of a constraint describes the interactions of two nodes.
Using only the <code>core</code> module the <code>type</code> can be set as <code>free</code> or <code>const</code> to allow or disallow motion respectively.
<code>mec2.drive</code> allows this <code>type</code> to be set as <code>drive</code> as well.
A constraint of <code>type</code> drive has a determined motion, which allows linkages with one degree of freedom to be fully determined.</p>
<p>Further properties can be provided to describe the motion (all angles in radiant):</p>
<ul>
<li><code>func</code>: The function used to describe the motions. Default is <code>linear</code>. A lot of other functions are implemented after <strong>VDI 2145</strong>, as well as web easing functions.</li>
<li><code>ref</code>: Use the angle of another constraints as reference.</li>
<li><code>Dw</code>: Angle of rotation. Default: <code>2 * Math.PI</code>.</li>
<li><code>t0</code>: Time in milliseconds when to start the drive, after model initialization.</li>
<li><code>Dt</code>: Time needed for one turn.</li>
<li><code>bounce</code>: Perform a reversed motion after each interval (<code>bounce</code> is issued between repetitions).</li>
<li><code>repeat</code>: Repeat the motion this many times.</li>
<li><code>args</code>: Arguments for sequential functions. Implemented in the second example.</li>
</ul>
<p>Using combinations of these properties a variety of motions can be described.</p>
<h4 id="example">Example: <a class="plnk" href="#example">#</a></h4>
<pre><code class="code-line language-json"><div>{
    <span class="hljs-attr">"nodes"</span>: [
        {
            <span class="hljs-attr">"id"</span>:<span class="hljs-string">"A0"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">"base"</span>: <span class="hljs-literal">true</span>
        }, {
            <span class="hljs-attr">"id"</span>:<span class="hljs-string">"A"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">140</span>
        }
    ],
    <span class="hljs-attr">"constraints"</span>: [
        {
            <span class="hljs-attr">"id"</span>:<span class="hljs-string">"a"</span>,<span class="hljs-attr">"p1"</span>:<span class="hljs-string">"A0"</span>,<span class="hljs-attr">"p2"</span>:<span class="hljs-string">"A"</span>,
            <span class="hljs-attr">"len"</span>:{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"const"</span>},
            <span class="hljs-attr">"ori"</span>:{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"drive"</span>,<span class="hljs-attr">"repeat"</span>:<span class="hljs-number">10</span>,<span class="hljs-attr">"Dt"</span>:<span class="hljs-number">3</span> }
        }
    ]
}  
</div></code></pre>
<p><img src="img/drive_1.gif" alt="first" class="loading" id="image-hash-807d9794d17e931d6c211db7def487eb56c94335bd07bd69b3f46defba0e547b"></p>
<p><code>- Drive Sequence</code></p>
<p>Drive functions can be composed as a sequence (<code>'func':'seq'</code>) of normalized functions, being one of <code>['const', 'linear', 'quadratic', 'harmonic', 'sinoid', 'poly5']</code> each. Every segment of a drive sequence must specify its function type <code>func</code>, its duration <code>dt</code> (always positive) and its value range <code>dz</code> (might be negative).</p>
<pre><code class="code-line language-json"><div>{
    <span class="hljs-attr">"nodes"</span>: [
        {<span class="hljs-attr">"id"</span>:<span class="hljs-string">"A0"</span>,<span class="hljs-attr">"x"</span>:<span class="hljs-number">175</span>,<span class="hljs-attr">"y"</span>:<span class="hljs-number">125</span>,<span class="hljs-attr">"base"</span>:<span class="hljs-literal">true</span>},
        {<span class="hljs-attr">"id"</span>:<span class="hljs-string">"A1"</span>,<span class="hljs-attr">"x"</span>:<span class="hljs-number">175</span>,<span class="hljs-attr">"y"</span>:<span class="hljs-number">225</span>}
    ],
    <span class="hljs-attr">"constraints"</span>: [
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"a"</span>, <span class="hljs-attr">"p1"</span>: <span class="hljs-string">"A0"</span>, <span class="hljs-attr">"p2"</span>: <span class="hljs-string">"A1"</span>,
          <span class="hljs-attr">"len"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span> },
          <span class="hljs-attr">"ori"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"drive"</span>, 
          <span class="hljs-attr">"Dt"</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">"Dw"</span>: <span class="hljs-number">-3.14</span>, <span class="hljs-attr">"repeat"</span>:<span class="hljs-number">2</span>,
          <span class="hljs-attr">"func"</span>: <span class="hljs-string">"seq"</span>, <span class="hljs-attr">"args"</span>: [
            { <span class="hljs-attr">"func"</span>: <span class="hljs-string">"quadratic"</span>, <span class="hljs-attr">"dt"</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">"dz"</span>: <span class="hljs-number">1</span> },
            { <span class="hljs-attr">"func"</span>: <span class="hljs-string">"const"</span>, <span class="hljs-attr">"dt"</span>: <span class="hljs-number">1</span> },
            {<span class="hljs-attr">"func"</span>: <span class="hljs-string">"linear"</span>, <span class="hljs-attr">"dt"</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">"dz"</span>: <span class="hljs-number">-1</span> }]
        }
    }]
}
</div></code></pre>
<p><img src="img/drive_2.gif" alt="first" class="loading" id="image-hash-b789fc63f73562889508258fa65a2b62dcaf554c1cdafc5bc3687107c93eb584"></p>
<pre><code class="code-line language-json"><div>{
    <span class="hljs-attr">"nodes"</span>:[
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"A0"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span>, <span class="hljs-attr">"base"</span>: <span class="hljs-literal">true</span> },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"B"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">175</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span> },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"B0"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">250</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span>,<span class="hljs-attr">"base"</span>: <span class="hljs-literal">true</span> },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"A"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">175</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span> }
    ],
    <span class="hljs-attr">"constraints"</span>:[
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"b"</span>, <span class="hljs-attr">"p1"</span>: <span class="hljs-string">"B0"</span>, <span class="hljs-attr">"p2"</span>: <span class="hljs-string">"A"</span>,
          <span class="hljs-attr">"len"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span> },
          <span class="hljs-attr">"ori"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"drive"</span>, <span class="hljs-attr">"repeat"</span>:<span class="hljs-number">3</span> }
        },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c"</span>, <span class="hljs-attr">"p1"</span>: <span class="hljs-string">"A0"</span>, <span class="hljs-attr">"p2"</span>: <span class="hljs-string">"B"</span>,
          <span class="hljs-attr">"len"</span>: {<span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span> },
          <span class="hljs-attr">"ori"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span>, <span class="hljs-attr">"ref"</span>:<span class="hljs-string">"b"</span>}
        }
    ]
}
</div></code></pre>
<p><img src="img/drive_3.gif" alt="first" class="loading" id="image-hash-89812d6ed0d2bae9a232fc4f78b5b9fb5dd687b0a911880a746a17c8bff620c2"></p>

</main>
<footer>
  <span class="left">&copy; mec2</span>
  <span class="center">powered by &mu;JAM &amp; VSCode &mdash; hosted by GitHub</span>
  <span class="right" onclick="document.documentElement.className = document.documentElement.className === 'theme-dark' ? 'theme-light' : 'theme-dark';">&#9788;</span>
</footer>
</body>
</html>